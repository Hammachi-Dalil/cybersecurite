<script>
  export default {
  data() {
    return {
      currentQuestion: 0,
      selectedAnswer: null,
      score: 0,
      quizCompleted: false,
      quizzes: [
        {
          title: "Quiz sur le Phishing",
          questions: [
            {
              question: "Que signifie le terme 'phishing' en cybersÃ©curitÃ© ?",
              answers: [
                { text: "Une technique de piratage basÃ©e sur des faux emails", correct: true },
                { text: "Un virus informatique", correct: false },
                { text: "Un pare-feu avancÃ©", correct: false },
                { text: "Un systÃ¨me de cryptographie", correct: false }
              ]
            },
            {
              question: "Quel est le but du phishing ?",
              answers: [
                { text: "RÃ©cupÃ©rer des informations personnelles", correct: true },
                { text: "Vendre des logiciels de sÃ©curitÃ©", correct: false },
                { text: "AccÃ©lÃ©rer la connexion Internet", correct: false },
                { text: "Supprimer les virus", correct: false }
              ]
            },
            {
              question: "Quel indice peut rÃ©vÃ©ler un email de phishing ?",
              answers: [
                { text: "Une adresse email suspecte", correct: true },
                { text: "Une promotion lÃ©gitime d'une entreprise", correct: false },
                { text: "Un logo bien placÃ©", correct: false },
                { text: "Un email de votre banque", correct: false }
              ]
            },
            {
              question: "Quelle action est recommandÃ©e face Ã  un email suspect ?",
              answers: [
                { text: "Ne pas cliquer sur les liens", correct: true },
                { text: "Ouvrir la piÃ¨ce jointe immÃ©diatement", correct: false },
                { text: "Partager l'email Ã  tous ses contacts", correct: false },
                { text: "Se dÃ©sabonner", correct: false }
              ]
            },
            {
              question: "Les fraudeurs utilisent souvent le phishing pour...",
              answers: [
                { text: "Voler des informations bancaires", correct: true },
                { text: "Faire des blagues", correct: false },
                { text: "Vendre des logiciels antivirus", correct: false },
                { text: "Promouvoir un site web", correct: false }
              ]
            }
          ]
        },
        {
          title: "Quiz sur les Mots de Passe",
          questions: [
            {
              question: "Quel est le mot de passe le plus sÃ©curisÃ© ?",
              answers: [
                { text: "123456", correct: false },
                { text: "P@ssw0rd", correct: false },
                { text: "K#2d!x8L#pG", correct: true },
                { text: "azerty", correct: false }
              ]
            },
            {
              question: "Que doit contenir un bon mot de passe ?",
              answers: [
                { text: "Majuscules, chiffres, symboles", correct: true },
                { text: "Seulement des lettres", correct: false },
                { text: "Uniquement des chiffres", correct: false },
                { text: "Votre nom et prÃ©nom", correct: false }
              ]
            },
            {
              question: "Pourquoi faut-il Ã©viter d'utiliser un mot de passe unique ?",
              answers: [
                { text: "Pour Ã©viter qu'un hacker accÃ¨de Ã  plusieurs comptes", correct: true },
                { text: "Parce que c'est difficile Ã  retenir", correct: false },
                { text: "Car il faut un mot de passe court", correct: false },
                { text: "Pour Ãªtre original", correct: false }
              ]
            },
            {
              question: "Un bon gestionnaire de mot de passe permet...",
              answers: [
                { text: "De stocker et gÃ©nÃ©rer des mots de passe complexes", correct: true },
                { text: "D'envoyer des mots de passe par SMS", correct: false },
                { text: "D'Ã©viter tout piratage", correct: false },
                { text: "D'Ã©crire les mots de passe sur papier", correct: false }
              ]
            },
            {
              question: "Que faire si un service a Ã©tÃ© piratÃ© ?",
              answers: [
                { text: "Changer immÃ©diatement son mot de passe", correct: true },
                { text: "Ignorer la menace", correct: false },
                { text: "Utiliser le mÃªme mot de passe", correct: false },
                { text: "Envoyer son mot de passe au support", correct: false }
              ]
            }
          ]
        },
        {
          title: "Quiz sur les Ransomwares",
          questions: [
            {
              question: "Quel est le principal objectif dâ€™un ransomware ?",
              answers: [
                { text: "Bloquer l'accÃ¨s aux fichiers et demander une ranÃ§on", correct: true },
                { text: "Voler les emails des utilisateurs", correct: false },
                { text: "AccÃ©lÃ©rer l'ordinateur", correct: false },
                { text: "Installer des mises Ã  jour", correct: false }
              ]
            },
            {
              question: "Quel est le meilleur moyen d'Ã©viter un ransomware ?",
              answers: [
                { text: "Faire des sauvegardes rÃ©guliÃ¨res", correct: true },
                { text: "Ouvrir tous les emails reÃ§us", correct: false },
                { text: "DÃ©sactiver son antivirus", correct: false },
                { text: "Ne pas mettre Ã  jour son PC", correct: false }
              ]
            },
            {
              question: "Comment un ransomware se propage-t-il ?",
              answers: [
                { text: "Par des piÃ¨ces jointes piÃ©gÃ©es", correct: true },
                { text: "En regardant des vidÃ©os YouTube", correct: false },
                { text: "En visitant un site gouvernemental", correct: false },
                { text: "En jouant Ã  des jeux vidÃ©o", correct: false }
              ]
            },
            {
              question: "Que faire si votre ordinateur est infectÃ© par un ransomware ?",
              answers: [
                { text: "Ne pas payer la ranÃ§on et restaurer une sauvegarde", correct: true },
                { text: "Payer la ranÃ§on immÃ©diatement", correct: false },
                { text: "Ignorer lâ€™alerte", correct: false },
                { text: "Partager la ranÃ§on avec des amis", correct: false }
              ]
            },
            {
              question: "Quel comportement rÃ©duit le risque de ransomware ?",
              answers: [
                { text: "Ã‰viter de tÃ©lÃ©charger des logiciels piratÃ©s", correct: true },
                { text: "Cliquer sur tous les liens", correct: false },
                { text: "Ignorer les mises Ã  jour", correct: false },
                { text: "Partager ses fichiers avec tout le monde", correct: false }
              ]
            }
          ]
        }
      ],
      selectedQuiz: {}
    };
  },
    created() {
      const quizIndex = this.$route.query.quizIndex;
      this.selectedQuiz = this.quizzes[quizIndex];
    },
    methods: {
      selectAnswer(index) {
        this.selectedAnswer = index;
      },
      nextQuestion() {
        if (this.selectedAnswer !== null) {
          if (this.selectedQuiz.questions[this.currentQuestion].answers[this.selectedAnswer].correct) {
            this.score++;
          }
          this.currentQuestion++;
          this.selectedAnswer = null;
  
          if (this.currentQuestion >= this.selectedQuiz.questions.length) {
            this.quizCompleted = true;
          }
        }
      },
      restartQuiz() {
        this.currentQuestion = 0;
        this.score = 0;
        this.selectedAnswer = null;
        this.quizCompleted = false;
      },
      goBack() {
        this.$router.push("/activite");
      }
    }
  };
  </script>

<template>
  <div class="quiz-container">
    <button class="back-button" @click="goBack">â¬… Retour Ã  la sÃ©lection</button>
    <h2>{{ selectedQuiz.title }}</h2>

    <div v-if="!quizCompleted">
      <div v-if="currentQuestion < selectedQuiz.questions.length" class="question-box">
        <h3>{{ selectedQuiz.questions[currentQuestion].question }}</h3>
        <ul>
          <li
            v-for="(answer, index) in selectedQuiz.questions[currentQuestion].answers"
            :key="index"
            :class="{ selected: selectedAnswer === index }"
            @click="selectAnswer(index)"
          >
            {{ answer.text }}
          </li>
        </ul>
        <button @click="nextQuestion" :disabled="selectedAnswer === null">Suivant</button>
      </div>
    </div>

    <div v-else class="result-box">
      <h3>ðŸŽ‰ Quiz terminÃ© !</h3>
      <p>Votre score : <strong>{{ score }} / {{ selectedQuiz.questions.length }}</strong></p>

      <h3>ðŸ“Œ RÃ©sumÃ© des questions et des bonnes rÃ©ponses :</h3>
      <ul class="summary-list">
        <li v-for="(question, index) in selectedQuiz.questions" :key="index">
          <p><strong>Question : </strong> {{ question.question }}</p>
          <p><strong>Bonne rÃ©ponse : </strong> 
            <span class="correct-answer">
              {{ question.answers.find(answer => answer.correct).text }}
            </span>
          </p>
        </li>
      </ul>

      <button @click="restartQuiz">Recommencer</button>
    </div>
  </div>
</template>
  
  <style lang="scss" scoped>
  .quiz-selection-container {
    max-width: 600px;
    margin: 0 auto;
    text-align: center;
    background: #f8f9fa;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  }

  .quiz-container {
    max-width: 600px;
    margin: 2vh auto;
    text-align: center;
    background: #f8f9fa;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  }
  
  ul {
    list-style: none;
    padding: 0;
  }
  
  li {
    background: #007bff;
    color: white;
    padding: 15px;
    margin: 10px 0;
    border-radius: 5px;
    cursor: pointer;
    transition: 0.3s;
  }
  
  li:hover {
    background: #0056b3;
  }

  li.selected {
    background: #2ac400;
  }

  button {
  padding: 10px 15px;
  font-size: 16px;
  font-weight: bold;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  transition: background 0.3s, transform 0.2s;

  &.next-button {
    background: #007bff;
    color: white;

    &:hover {
      background: #0056b3;
      transform: scale(1.05);
    }
  }

  &.back-button {
    background: #ff5722;
    color: white;
    margin: 2vh;


    &:hover {
      background: #e64a19;
      transform: scale(1.05);
    }
  }
}

  </style>
  
  